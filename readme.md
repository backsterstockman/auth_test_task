# üöÄ FastAPI Access-Controlled API

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç ‚Äî API –Ω–∞ FastAPI —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ JWT –∏ –∫–∞—Å—Ç–æ–º–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–æ–ª–µ–π –∏ —Ä–µ—Å—É—Ä—Å–æ–≤. –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã, –∞ –¥–æ—Å—Ç—É–ø —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `permissions`.

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **FastAPI** ‚Äî –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π API-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **PostgreSQL** ‚Äî —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **SQLAlchemy** ‚Äî ORM –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ë–î


## üóÉÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### users

- `id`: UUID
- `email`: str
- `hashed_password`: str
- `role`: str (–Ω–∞–ø—Ä–∏–º–µ—Ä, "user", "admin")

### permissions

- `id`: UUID
- `resource`: str (`/users`, `/permissions`, `/resumes`, –∏ —Ç.–¥.)
- `role`: str
- `is_allowed`: bool

### resumes

- `id`: UUID
- `user_id`: int (id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- `about_me`: str
- `job_time`: str
- `salary`: int

---

## ‚öôÔ∏è –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/backsterstockman/auth_test_task
cd auth_test_task
```

### 2. –°–æ–∑–¥–∞–π .env

```bash
DB_HOST=db
DB_PORT=5432
DB_USER=postgres
DB_PASS=postgres
DB_NAME=auth
SECRET_KEY=vladislavyaroshuk
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
```

### 3. –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç —á–µ—Ä–µ–∑ docker

```bash
docker-compose up --build
```

### 4. –û—Ç–∫—Ä–æ–π –ø—Ä–æ–µ–∫—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ localhost:8000/docs


## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

Admin –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—ã–µ –º–µ—Ç–æ–¥—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.  
User –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –ø–æ —Ç–æ—á–∫–∞–º —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º permissions.


### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```
–ê–≤—Ç–æ—Ä–∏–∑—É–π—Å—è –ø–æ–¥ –¥–∞–Ω–Ω—ã–º–∏(–∞–¥–º–∏–Ω)
john.doe@example.com
password
```

### 2. –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç—É –º–µ—Ç–æ–¥–æ–≤

### 3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ –º–µ—Ç–æ–¥ register (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)

### 4. –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç—É –º–µ—Ç–æ–¥–æ–≤

